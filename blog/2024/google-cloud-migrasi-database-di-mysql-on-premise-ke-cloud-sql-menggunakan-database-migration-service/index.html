<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p id="55af">Halo semua!</p> <p id="ada9">Selamat siang! Apa kabar? Jumpa lagi di Jurnal saya ya! Sudah lama tidak update dan disini saya ingin memulai tahun 2024 dengan topik <strong>migrasi database MySQL di on-premise ke Cloud SQL menggunakan Database Migration Service.</strong></p> <p id="1c9b">Yup!</p> <p id="e48a">Mengapa harus menggunakan Database Migration Service? Sebenarnya bisa saja kita menggunakan tool semacam <code>mysqldump</code> untuk <em>dump</em> database di on-premise dan <em>restore</em> di Cloud SQL. Itu cara termudah dan tidak perlu layanan tambahan seperti Database Migration Service. Hanya saja hal tersebut memiliki kekurangan salah satunya aplikasi haruslah downtime.</p> <p id="02d0">Mengapa? karena jika kita menggunakan tool <code>mysqldump</code> sedangkan aplikasi masih dalam keadaan up dan running, maka ditakutkan adanya inkonsistensi data. Data yang ingin dipidahkan haruslah data terbaru dan tidak rusak.</p> <p id="6581">Selain itu juga, jika data yang ingin dipindahkan berukuran sangat besar sehingga akan memakan waktu yang lama, maka aka solusi yang tepat adalah menggunakan layanan tambahan seperti Database Migration Service. Intinya, kita ingin memindahkan database dari MySQL on-premise (misal di atas instance) ke Cloud SQL tanpa ingin mematikan aplikasi dan ingin data tetap utuh dan konsisten.</p> <p id="10eb">Bagaimana cara kerja Database Migration Service?</p> <p id="fa66">Pertama, kita perlu membuat <em>connection profile</em> yang berisi detail database yang berada di on-premise seperti <em>IP Address</em>, <em>username</em> dan <em>password</em> yang memiliki hak akses. Selanjutnya kita buat job di DBMS berisi detail seperti tipe migrasi (apakah continuous atau one-time), profile database sumber dan tujuan, serta metode koneksi apa yang ingin dipakai untuk migrasi.</p> <p id="d057">Mari kita mulai.</p> <p id="363b">Sebelum memulai pastikan kedua API dibawah ini, yaitu <strong>Database Migration API</strong> dan <strong>Service Networking API.</strong></p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="413" data-attachment-id="11146" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/image-283/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png" data-orig-size="1554,628" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png?w=1024" alt="" class="wp-image-11146" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png?w=1022 1022w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png?w=768 768w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image.png 1554w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p></p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="415" data-attachment-id="11161" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-34-21e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png" data-orig-size="1534,622" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.34.21e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png?w=1024" alt="" class="wp-image-11161" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png?w=768 768w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.34.21e280afpm.png 1534w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Di bawah ini adalah VM instance yang berisi database yang akan kita migrasi ke Cloud SQL. </p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="264" data-attachment-id="11147" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/image-1-15/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png" data-orig-size="2284,590" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="image-1" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=1024" alt="" class="wp-image-11147" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=1022 1022w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=2044 2044w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-1.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Selanjutnya, buka layanan DBMS dengan tampilan seperti berikut:</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="425" data-attachment-id="11149" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/image-2-66/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png" data-orig-size="2372,986" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="image-2" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=1024" alt="" class="wp-image-11149" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=1022 1022w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=2045 2045w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-2.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Pertama, kita buat <em>connection profile</em>. Klik <strong>Create Profile.</strong></p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="413" data-attachment-id="11151" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/image-3-15/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png" data-orig-size="1762,712" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="image-3" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png?w=1024" alt="" class="wp-image-11151" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png?w=1022 1022w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png?w=768 768w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/image-3.png 1762w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Ada beberapa database engine yang didukung oleh Google Cloud, khususnya untuk MySQL dan PostgreSQL. Disini saya pilih MySQL.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="596" data-attachment-id="11152" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-26-50e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png" data-orig-size="1798,1048" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.26.50e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png?w=1024" alt="" class="wp-image-11152" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png?w=768 768w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.26.50e280afpm.png 1798w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Isikan detail koneksi dari database yang berada di on-premise seperti Hostname/IP Address, port, username, dan password. Untuk <em>connection profile region</em> pilih region dimana Cloud SQL akan ditempatkan. Lalu klik <strong>Create</strong>.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="900" data-attachment-id="11153" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-27-30e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png" data-orig-size="1830,1610" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.27.30e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png?w=1024" alt="" class="wp-image-11153" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png?w=768 768w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.27.30e280afpm.png 1830w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p></p> <p>Selanjutnya, kita tinggal buat job migrasinya! Klik Create a migration job dan isi detail yang terdiri dari 5 tahap. Pertama, isikan nama job, database engine, dan tipe job migrasi. Apa bedanya? untuk Continuous sendiri saat proses migrasi selesai, antara MySQL di on-premise dan Cloud SQL di tujuan akan sama-sama running dan kita bisa verifikasi. Jika ada data masuk di MySQL on-premise, data akan otomatis direplika ke Cloud SQL sampai kita melakukan cutover/promote. Sedangkan on-time, seperti namanya, migrasi hanya akan dilakukan sekali.</p> <p>Disini saya pilih <strong>Continuous</strong>.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="690" data-attachment-id="11155" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-30-02e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png" data-orig-size="2674,1802" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.30.02e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=1024" alt="" class="wp-image-11155" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=2048 2048w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.02e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Langkah kedua pilih connection profile yang telah dibuat sebelumnya.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="607" data-attachment-id="11157" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-30-46e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png" data-orig-size="2288,1358" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.30.46e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=1024" alt="" class="wp-image-11157" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=2045 2045w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.30.46e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Langkah ketiga set tujuan instance, disini saya karena belum punya Cloud SQL instance, maka saya pilih <strong>New Instance</strong> dan set detailnya.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="778" data-attachment-id="11159" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-32-08e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png" data-orig-size="2292,1742" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.32.08e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=1024" alt="" class="wp-image-11159" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=2048 2048w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.32.08e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Pada langkah keempat adalah mengatur koneksi apa yang dipilih untuk DBMS melakukan migrasi. Ada tiga pilihan, yaitu IP allowlist, Reverse-SSH tunnel, dan VPC peering. </p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="458" data-attachment-id="11160" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-33-45e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png" data-orig-size="2216,992" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.33.45e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=1024" alt="" class="wp-image-11160" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=2046 2046w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.33.45e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Ketiganya bisa dipilih salah satu, dan karena disini MySQL on-premise saya simulasikan di VM instance, saya pilih VPC peering.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="495" data-attachment-id="11163" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-38-47e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png" data-orig-size="2176,1052" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.38.47e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=1024" alt="" class="wp-image-11163" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=2048 2048w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.38.47e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Langkah kelima bisa direview dan untuk memastikan koneksi aman dan migrasi berhasil bisa <strong>Test Job.</strong></p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="625" data-attachment-id="11164" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-39-01e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png" data-orig-size="2228,1360" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.39.01e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=1024" alt="" class="wp-image-11164" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=2048 2048w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.39.01e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Pastikan centang hijau! Klik <strong>Create &amp; Start Job</strong> untuk mulai migrasi.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="785" data-attachment-id="11166" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-52-27e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png" data-orig-size="2088,1602" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.52.27e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=1024" alt="" class="wp-image-11166" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=2046 2046w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.52.27e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Tampilan proses job migrasi</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="209" data-attachment-id="11167" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-3-54-43e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png" data-orig-size="3322,680" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-3.54.43e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=1024" alt="" class="wp-image-11167" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=1021 1021w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=2042 2042w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-3.54.43e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Berikut tampilan Cloud SQL instance. </p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="209" data-attachment-id="11169" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-4-09-59e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png" data-orig-size="3322,680" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-4.09.59e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=1024" alt="" class="wp-image-11169" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=1021 1021w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=2042 2042w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.09.59e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Bisa verifikasi menggunakan SQL query.</p> <pre class="wp-block-code"><code>gcloud sql connect mysql-cloudsql -user=root --quiet</code></pre> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="345" data-attachment-id="11170" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-4-11-38e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png" data-orig-size="2158,728" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-4.11.38e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=1024" alt="" class="wp-image-11170" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=2045 2045w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.11.38e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p></p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="351" data-attachment-id="11171" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-4-13-08e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png" data-orig-size="3034,1040" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-4.13.08e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=1024" alt="" class="wp-image-11171" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=2048 2048w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.13.08e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Dari tampilan di atas migrasi database kita berhasil! Yeay!</p> <p>Karena kita pilih Continuous, maka selama job masih running maka data baru yang masuk ke instance akan otomatis direplika ke Cloud SQL. Hal ini biasanya dilakukan untuk melakukan verifikasi dan memastikan data tidak ada yang tertinggal.</p> <p>Jika sudah selesai kita bisa lakukan cutover dengan klik <strong>Promote </strong>di job migrasi.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="420" data-attachment-id="11172" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-4-16-41e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png" data-orig-size="2668,1096" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-4.16.41e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=1024" alt="" class="wp-image-11172" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=1022 1022w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=2045 2045w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.16.41e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Tunggu sampai selesai dan status akan berubah menjadi <strong>Completed</strong>.</p> <figure class="wp-block-image size-large"><img loading="lazy" width="1024" height="255" data-attachment-id="11175" data-permalink="https://misskecupbung.wordpress.com/2024/01/17/google-cloud-migrasi-database-di-mysql-on-premise-ke-cloud-sql-menggunakan-database-migration-service/screenshot-2024-01-17-at-4-20-33e280afpm/" data-orig-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png" data-orig-size="2470,616" data-comments-opened="1" data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}' data-image-title="screenshot-2024-01-17-at-4.20.33e280afpm" data-image-description="" data-image-caption="" data-medium-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=300" data-large-file="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=616" src="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=1024" alt="" class="wp-image-11175" srcset="https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=1024 1024w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=2045 2045w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=150 150w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=300 300w, https://misskecupbung.wordpress.com/wp-content/uploads/2024/01/screenshot-2024-01-17-at-4.20.33e280afpm.png?w=768 768w" sizes="(max-width: 1024px) 100vw, 1024px"></figure> <p>Migrasi database kita sukses dan selesai!</p> <p></p> <p>Sekian!</p> <p></p> <p></p> <p></p> <p></p> <p>Sumber:</p> <ul class="wp-block-list"> <li><a href="https://cloud.google.com/database-migration" rel="external nofollow noopener" target="_blank">https://cloud.google.com/database-migration</a></li> </ul> <p></p> <p></p> <p></p> <p></p> </body></html>